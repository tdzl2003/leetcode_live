## A

因为一旦1号有人就不能

所以最佳策略必为以下之一：

* 从左往右排，遇到

## B

简单的说，以该点为根，每个子树上的点都不超过总点数的一半，该点就是最佳点，否则超该子树移动可以让距离变小。

所以以每个点为根，求所有子树的数量，计算剩下点的分布，每个桶不超过 子树数量 和 总点数一半，总数达到总点数

反过来说，是扣掉某个桶超过总点数一半的组合数

设j为子节点中选中点的数量：

$$
{cnt \choose j}{n-cnt \choose k-j}
= \frac{cnt!(n-cnt)!}{j!(k-j)!(cnt-j)!(n-cnt-k+j)!}
= cnt!(n-cnt)! \times \frac{1}{j!(k-j)!} \times \frac{1} {(cnt-j)!(n-k-(cnt-j))!}
$$

分三部分，后两部分可以用 卷积求得，第一部分可以提取出来后直接求得。

但卷积被卡模数了。

> 卷积不能随便用，这题可以无需卷积，后续补。