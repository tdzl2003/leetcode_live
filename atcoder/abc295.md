[比赛链接](https://atcoder.jp/contests/abc295)

## A

简单题，按题意实现即可

## B

简单题，按题意实现暴力枚举即可

## C

简单题，对相同的数字计数并贪心配对即可；也可排序后连续计数。

## D

其实是问多少个连续区段中，所有数字的个数都是偶数。

连续区段计数问题考虑前缀和，这里用二进制的十个位表示每个数字出现的奇偶性，那么出现重复的状态的时候，意味着这两个状态之间的区段满足条件。


## E

我赛中的思路：

枚举目标数 i，然后考虑未知数中，比i小的有a个，比i大的有c个，和i相等的有b个
根据已知数中比i小的和比i大的数目可以推出a和c的上界。

然后其组合数公式列出来这样：

$$
\sum_a\sum_c \frac{zc!}{a!c!b!} (i-1)^a(M-i)^c
$$

该公式可以拆成包含a的部分、包含c的部分分别计算，然后卷积，再加入剩下的部分求和。复杂度 $O(MNlgN)$ 。

题解的思路：

要求的是 $X=A_k$ 的期望：

$$
E(X) = \sum_{i=1}^M(i*P(X=i)) = \sum_{i=1}^MP(X\ge i)
$$

这个计算起来更加容易，相比起思路1的公式，它不必拆分等于或大于$i$ 的情况。

所以可以直接枚举比 $i$ 小的未知数个数，在 $O(NM)$ 时间内完成。