[比赛链接](https://atcoder.jp/contests/abc293)

## A

简单题，不说

## B

简单题，按题意模拟

## C

看起来很复杂，但是数据已经给了最坏情况的组合数，也不是很大，所以直接硬DFS即可。

## D

颜色只是约束输入的，对输出没影响。。直接求强连通块，然后看每个强连通块的边数来判断是链还是环就行了。

## E

倍增法

首先倍增求 $A^{2^0}, A^{2^1}, ...$

然后倍增求 $1, 1+A, 1+A+..+A^{2^2-1}, ...$

最后可以 $O(lgX)$ 时间求出。注意需要单独处理 $M=1$ 的情况，此时直接输出0即可。

## F

首先当 $N>2$ 时， $N$ 和 $N-1$ 都是解，组成2位的所有解。

然后考虑三位以上的，因为：

$N = A_iB^i+....+A_1B^1+A_0B^0$ 其中的 $A_i$ 只能取0或1。

若对某个 $i$，存在最高位为 $B^i$ 的进制 $B$，显然有 $B^i\le N \lt (B+1)^{i} $

* 因为最高位是 $B^i$ 所以显然 $B^i\le N $
* 若 $(B+1)^i\le N$， 那么 $N\ge (B+1)^i = B^i + {i \choose 1}B^{i-1}+{i \choose 2}B^{i-2} ... > B^i+B^{i-1}+B^{i-2}...$ 没有 $B$ 进制的符合条件的解。

因此 $B=\lfloor N^{\frac{1}{i}}\rfloor$ 是唯一可能的解。

遍历所有的位数，二分求解相应的 $B$，再进行校验就行了。显然最多不会超过$O(lgN)$次遍历，总复杂度 $O(lg^2N)$ 。

二分时需要小心越界

## G

据说是莫队，还没补；

## Ex

感觉是换根DP，WA还没找到反例，后续补。看标程是二分+校验。