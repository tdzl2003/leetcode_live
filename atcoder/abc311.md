## A

简单题，按题意模拟即可。

## B

简单题，按题意判断并记录找到的最大长度即可。

## C

简单数论题。

根据题意，每个点都有唯一的后继点，因此经过足够的距离以后，一定会陷入某个环。

可以证明，从任意点出发，经过 $N$ 个点之后，一定在某个环中。

因为题目没有对具体什么环、怎么找起点做要求，因此从该点出发直到回到该点即可。


## D

BFS。

注意经过的点并不能停留下来改变方向，因此只有在石头面前停住的点才进入队列作为起点。

另一种做法是把 $(位置,方向)$ 二元组作为bfs目标，只有面朝石头的时候可以任意改变方向。不过对这题来说这么做好处有限。

## E

### 我的解法

考虑相同左上角坐标的所有正方形，若其中最大的一个边长为 $k$ ，那么从 $1..k$ 的所有边长都可以构成一个正方形。即：是否构成正方形对 $n$ 单调。

因此我们可以遍历每个左上角，计算出最大的可能边长，将其累加即可得到结果。

采用二维前缀和，我们可以在 $O(1)$ 时间内判断一个区间是否有洞，因此采用二分查找，我们可以在 $lg(H+W)$ 时间内找到最大的三角形边长，总复杂度 $N+HWlg(H+W)$ ，足以通过本题。

### 标程解法

标程采用了一个更漂亮的解法：使用递推求解以每个格子为正方形右下角的方案数（等同于最大的满足条件的正方形边长）。

若该格子为洞，显然方案数为0。

若该格子不为洞，我们可以证明其方案数等于其上方、左上方、左方 三个位置方案数的最小值 + 1 。可以完成 $O(1)$ 递推。

总复杂度 $N+HW$ 

## F

关键思路在于将每列错一位来看（上方的全部看做.，下方的全部看做#）：

```
.
.#
##
 #
```

错位变形为（高度为H+W-1，宽度仍为W）：

```
.#
.#
##
```

变形后，可以证明，每行都从第一个#开始持续到结尾。并且，每行的第一个#都早于上一行的第一个#

因此可以采用DP，记录 $DP[c][j]$ 为变形后第c行有恰好 $j$ 个#的组合数，j取值范围为 $0..W$ 。这样每行的取值为上一行的前缀和，可以在 $O((H+W)W)$ 时间内完成计算。

